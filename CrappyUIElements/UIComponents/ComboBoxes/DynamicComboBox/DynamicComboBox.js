"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Animation_Utilities_1=require("../../../Utils/Animation.Utilities"),CBoxUtils=require("../ComboBox.Utils"),utils=require("../../../Utils/Utilities"),DynamicComboBox=function(){function t(t,e){var i=this;this.selectableList=e,this.listVisible=!1,this.createElements(t),this.setInitialProperties(t),this.listElements=CBoxUtils.createListElements(this.selectableList,this.selectableList.values,this.listElements,this.listElementClass,this,this.changeToSelected),this.btnInput.addEventListener("click",function(){CBoxUtils.addRemoveClass(i.listVisible,i.btnInput,i.changeBtnClass),i.toggleListElements()}),this.debouncedInputTxt=utils.debounce(function(t){var e=i.selectableList.filteredValues(t,0);i.listElements=CBoxUtils.createListElements(i.selectableList,e,i.listElements,i.listElementClass,i,i.changeToSelected);var s=Animation_Utilities_1.animationsUtils.getListElementHeightOverflow(i.listElements,i.maxLength);0<e.length?(i.listElements.style.height=s.height+"px",i.listElements.style.overflow=s.overflow,i.listVisible||(CBoxUtils.addRemoveClass(i.listVisible,i.btnInput,i.changeBtnClass),i.listElements.style.display="block",i.listVisible=!0)):(i.listVisible=!1,i.listElements.style.display="none")},1200),this.txtInput.addEventListener("input",function(){i.debouncedInputTxt(i.txtInput.value)}),this.setInitialValueToTextInput()}return t.prototype.changeValue=function(t){var e=this.selectableList.getIndex(t);this.selectableList.selected=this.selectableList.values[e]},t.prototype.setInitialValueToTextInput=function(){this.selectableList.selected&&(this.txtInput.value=this.selectableList.getText(this.selectableList.selected))},t.prototype.setInitialProperties=function(t){this.txtInput.readOnly=!1,this.changeBtnClass=t.btnChangeClass||"unfolded",this.listElementClass=t.listElementClass||"li-elem",this.maxLength=t.maxSize},t.prototype.changeToSelected=function(t){if(this.changeValue(t),this.selectableList.selected){this.txtInput.value=this.selectableList.getText(this.selectableList.selected);var e=this.selectableList.filteredValues(this.txtInput.value,0);this.listElements=CBoxUtils.createListElements(this.selectableList,e,this.listElements,this.listElementClass,this,this.changeToSelected),this.hideAfterSelected()}},t.prototype.hideAfterSelected=function(){this.listVisible=CBoxUtils.hideAfterSelected(this.listElements,this.maxLength,this.listVisible,this.btnInput,this.changeBtnClass)},t.prototype.toggleListElements=function(){this.listVisible=CBoxUtils.toggleListElements(this.listElements,this.maxLength,this.listVisible)},t.prototype.createElements=function(t){var e=CBoxUtils.createHTMLElements(t);this.htmlElement=e.htmlElement,this.txtInput=e.txtInput,this.btnInput=e.btnInput,this.listElements=e.listElements},t}();exports.DynamicComboBox=DynamicComboBox;