"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Utilities_1=require("../../Utils/Utilities"),Animation_Utilities_1=require("../../Utils/Animation.Utilities"),DatePicker=function(){function t(t,e){var s=this;this.date=e,this.setProperties(t),this.createHTMLElements(t),this.setHTMLElementsAndCollections(),this.fillDayLabels(),this.fillDays(),this.fillMonthYearLabel(),this.showDateOnStart&&(this.htmlTextInput.value=this.date.dateToString()),this.debouncedParseAndAddToOutput=Utilities_1.debounce(function(t){s.changeValue("txtDate",t)&&(s.fillMonthYearLabel(),s.fillDays())},1200),this.htmlButtonInput.addEventListener("click",function(){Animation_Utilities_1.animationsUtils.slideToggle(s.htmlDatePicker,150,"ease-in")}),this.htmlNextMonthButton.addEventListener("click",function(){s.nextMonth()}),this.htmlPreviousMonthButton.addEventListener("click",function(){s.previousMonth()}),this.htmlTextInput.addEventListener("input",function(){s.debouncedParseAndAddToOutput(s.htmlTextInput.value)})}return t.prototype.changeValue=function(t,e){switch(void 0===e&&(e=null),t){case"nextMonth":return void this.date.addMonth();case"previousMonth":return void this.date.subtractMonth();case"txtDate":if(e&&"string"==typeof e)return this.date.validateDate(e)?this.date.getDateFromString(e):null;case"day":if(e&&"number"==typeof e)return void this.date.setDay(e)}},t.prototype.nextMonth=function(){this.changeValue("nextMonth"),this.fillMonthYearLabel(),this.fillDays(),this.htmlTextInput.value=this.date.dateToString()},t.prototype.previousMonth=function(){this.changeValue("previousMonth"),this.fillMonthYearLabel(),this.fillDays(),this.htmlTextInput.value=this.date.dateToString()},t.prototype.fillMonthYearLabel=function(){this.htmlMonthYearLabel.textContent=this.date.getMonthYearString()},t.prototype.setProperties=function(t){this.inputsRowClass=t.inputsRowClass||"inputs",this.inputTxtClass=t.txtInputClass||"input-txt",this.inputBtnClass=t.btnInputClass||"input-btn",this.monthSelectionClass=t.monthSelectionClass||"month-selection",this.buttonPreviousClass=t.prevBtnClass||"prev-btn",this.buttonNextClass=t.nextBtnClass||"next-btn",this.monthDisplayClass=t.monthYearLabelClass||"month-display",this.dayLabelClass=t.dayLabelClass||"cell-header",this.dayClass=t.dayClass||"cell-day",this.dayTableClass=t.dayTableClass||"days-table",this.datePickerDivClass=t.datePickerDivClass||"date-picker",this.todayClass=t.todayClass||"today-date",this.selectedDayClass=t.selectedDayClass||"current-date",this.showDateOnStart=t.showDateOnStart||"false"},t.prototype.setHTMLElementsAndCollections=function(){var t="."+this.datePickerDivClass+" ."+this.dayTableClass+" ."+this.dayClass;this.daysTableCollection=Array.from(this.htmlElement.querySelectorAll(t));var e="."+this.datePickerDivClass;this.htmlDatePicker=this.htmlElement.querySelector(e);var s="."+this.datePickerDivClass+" ."+this.monthDisplayClass;this.htmlMonthYearLabel=this.htmlElement.querySelector(s);var a="."+this.datePickerDivClass+" ."+this.buttonPreviousClass;this.htmlPreviousMonthButton=this.htmlElement.querySelector(a);var i="."+this.datePickerDivClass+" ."+this.buttonNextClass;this.htmlNextMonthButton=this.htmlElement.querySelector(i);var l="."+this.inputsRowClass+" ."+this.inputTxtClass;this.htmlTextInput=this.htmlElement.querySelector(l);var n="."+this.inputsRowClass+" ."+this.inputBtnClass;this.htmlButtonInput=this.htmlElement.querySelector(n)},t.prototype.fillDayLabels=function(){var s=this,t="."+this.datePickerDivClass+" ."+this.dayTableClass+" ."+this.dayLabelClass,e=Array.from(this.htmlElement.querySelectorAll(t));this.date.daysLabels.length===e.length&&e.map(function(t,e){t.textContent=s.date.daysLabels[e]})},t.prototype.fillElementWithValues=function(t,e){e.textContent=t+"",this.addDayEventHandler(t,e)},t.prototype.fillElementWithEmptyValues=function(t){t.textContent="Â ",t.setAttribute("disabled",""),t.classList.add("disabled")},t.prototype.fillDays=function(){var s=this,a=this.date.firstDayWeekOfMonth(),i=this.date.lastDayOfMonth()+a,l=1;this.daysTableCollection.map(function(t,e){s.removeDayClasses(t),a<=e&&e<i?(s.fillElementWithValues(l,t),s.setTodayAndSelectedDayClass(l,t),l+=1):s.fillElementWithEmptyValues(t)})},t.prototype.removeDayClasses=function(t){t.classList.remove(this.todayClass),t.classList.remove(this.selectedDayClass)},t.prototype.setTodayAndSelectedDayClass=function(t,e){this.date.isToday(t)&&e.classList.add(this.todayClass),this.date.isSelectedDay(t)&&e.classList.add(this.selectedDayClass)},t.prototype.addDayEventHandler=function(t,e){var s=this;e.addEventListener("click",function(){s.daysTableCollection[s.date.getDay()+s.date.firstDayWeekOfMonth()-1].classList.remove(s.selectedDayClass),s.changeValue("day",t),s.htmlTextInput.value=s.date.dateToString(),s.daysTableCollection[s.date.getDay()+s.date.firstDayWeekOfMonth()-1].classList.add(s.selectedDayClass)})},t.prototype.createHTMLElements=function(t){if(this.htmlElement=document.querySelector(t.querySelectorString),this.htmlElement){this.htmlElement.classList.add(t.elementClass);var e=this.createInputsRow();this.htmlElement.appendChild(e);var s=this.createDatePickerElem(t);this.htmlElement.appendChild(s)}},t.prototype.createInputsRow=function(){var t=document.createElement("div");t.classList.add(this.inputsRowClass);var e='\n            <input class="'+this.inputTxtClass+'" type="text">\n            <button class="'+this.inputBtnClass+'"></button>';return t.innerHTML=e.trim(),t},t.prototype.createDatePickerElem=function(t){var e=document.createElement("div");return e.classList.add(this.datePickerDivClass),e.appendChild(this.createMonthSelectionElement()),e.appendChild(this.createDaysTable()),e},t.prototype.createMonthSelectionElement=function(){var t=document.createElement("div"),e='<button class="'+this.buttonPreviousClass+'"></button>\n        <span class="'+this.monthDisplayClass+'"></span>\n        <button class="'+this.buttonNextClass+'"></button>';return t.classList.add(this.monthSelectionClass),t.innerHTML=e.trim(),t},t.prototype.createDaysTable=function(){var t=document.createElement("table");return t.appendChild(this.createDaysLabels()),t.appendChild(this.createDays()),t.classList.add(this.dayTableClass),t},t.prototype.createDays=function(){for(var t=document.createElement("tbody"),e=0;e<=5;e++){for(var s=document.createElement("tr"),a=0;a<=6;a++){var i=document.createElement("td");i.classList.add(this.dayClass),s.appendChild(i)}t.appendChild(s)}return t},t.prototype.createDaysLabels=function(){for(var t=document.createElement("thead"),e=document.createElement("tr"),s=0;s<=6;s++){var a=document.createElement("td");a.classList.add(this.dayLabelClass),e.appendChild(a)}return t.appendChild(e),t},t}();exports.DatePicker=DatePicker;